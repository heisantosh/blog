<header class="site-header">
  <h1 class="site-title">
    <a href="{{ .Site.BaseURL }}" class="logo-link">
      <div class="logo-text">{{ .Site.Title }}</div>
      <svg class="delay-line-icon" viewBox="0 0 200 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <!-- Input End Cap (Transducer Mount) -->
        <rect x="0.5" y="0.5" width="23" height="23" rx="2" stroke="currentColor" stroke-width="1.5"/>
        <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="1" stroke-linecap="round"/>
        <circle cx="12" cy="12" r="3" fill="currentColor"/>

        <!-- Output End Cap (Transducer Mount) -->
        <rect x="176.5" y="0.5" width="23" height="23" rx="2" stroke="currentColor" stroke-width="1.5"/>
        <line x1="188" y1="5" x2="188" y2="19" stroke="currentColor" stroke-width="1" stroke-linecap="round"/>
        <circle cx="188" cy="12" r="3" fill="currentColor"/>

        <!-- The Tube -->
        <path d="M24 6 H 176 V 18 H 24 V 6 Z" stroke="currentColor" stroke-width="1.5" />
        
        <!-- Internal Details (Shading/Reflection) -->
        <path d="M28 9 H 172" stroke="currentColor" stroke-width="0.5" stroke-opacity="0.3"/>
        <path d="M28 15 H 172" stroke="currentColor" stroke-width="0.5" stroke-opacity="0.3"/>

        <!-- Signal Trace (Inside Tube) -->
        <path d="M30 12 H 40 L 45 8 L 50 16 L 55 12 H 70 L 75 8 L 80 16 L 85 12 H 100 L 105 8 L 110 16 L 115 12 H 130 L 135 8 L 140 16 L 145 12 H 170" stroke="currentColor" stroke-width="1.5" class="signal-trace"/>
      </svg>
    </a>
  </h1>

  <nav class="site-nav">
    <a href="{{ "about/" | relURL }}">about</a>
    <a href="{{ "projects/" | relURL }}">projects</a>

    <!-- Theme Toggle Button (Lantern) -->
    <button class="theme-toggle" type="button" onclick="toggleTheme()" aria-label="Toggle dark mode" title="Toggle dark mode">
      <!-- Lantern ON (light mode) -->
      <svg class="lamp-on" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <!-- Roof -->
        <path d="M12 3l-7 4h14l-7-4z" />
        <!-- Finial -->
        <path d="M12 2v1" />
        <!-- Cage/Glass -->
        <path d="M5 7l2 11h10l2-11" />
        <!-- Base -->
        <path d="M12 18v4" />
        <path d="M9 22h6" />
        <!-- Light Source (Glow) -->
        <circle cx="12" cy="13" r="3" fill="currentColor" stroke="none" opacity="0.8" />
        <!-- Rays (Shining) -->
        <path d="M12 10v-1" />
        <path d="M12 16v1" />
        <path d="M9 13h-1" />
        <path d="M15 13h1" />
        <path d="M10 11l-1-1" />
        <path d="M14 11l1-1" />
        <path d="M10 15l-1 1" />
        <path d="M14 15l1 1" />
      </svg>
      <!-- Lantern OFF (dark mode) -->
      <svg class="lamp-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <!-- Roof -->
        <path d="M12 3l-7 4h14l-7-4z" />
        <!-- Finial -->
        <path d="M12 2v1" />
        <!-- Cage/Glass -->
        <path d="M5 7l2 11h10l2-11" />
        <!-- Base -->
        <path d="M12 18v4" />
        <path d="M9 22h6" />
        <!-- Light Source (Off) -->
        <circle cx="12" cy="13" r="2" />
      </svg>
    </button>
  </nav>
</header>

<script>
  function toggleTheme() {
    var html = document.documentElement;
    var currentTheme = html.getAttribute('data-theme');
    var newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    html.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
  }

  // Random computer-themed title symbol (only when mode is "random")
  // Symbols inspired by computing history:
  //   λ  - Lambda calculus (Church, Turing)
  //   ⊕  - XOR gate (logic circuits)
  //   ¬  - NOT gate (boolean logic)
  //   ▮  - Block cursor (terminals)
  //   Δ  - Delta/change (state machines)
  //   ⬚  - Empty register (memory)
  //   ◊  - Decision (flowcharts)
  //   »  - Bit shift (assembly)
  (function() {
    var symbol = document.querySelector('.title-symbol');
    if (symbol && symbol.getAttribute('data-mode') === 'random') {
      var symbols = ['λ', '⊕', '¬', '▮', 'Δ', '⬚', '◊', '»'];
      symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
    }
  })();
</script>
