<header class="site-header">
  <h1 class="site-title">
    <a href="{{ .Site.BaseURL }}" class="logo-link {{ .Site.Params.logoStyle | default "isometric" }}">
      {{ if eq (.Site.Params.logoStyle | default "isometric") "isometric" }}
        <!-- Option 1: Isometric Component (Physical/Technical) -->
        <svg class="site-logo logo-isometric" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <!-- Main Tube Body (Cylinder) -->
          <path d="M10 25 L30 15 L34 17 L14 27 Z" fill="currentColor" opacity="0.8"/>
          <path d="M10 25 L14 27 L14 23 L10 21 Z" fill="currentColor" opacity="0.6"/> <!-- End cap shading -->
          
          <!-- End Block (Left) -->
          <path d="M6 23 L14 19 L18 21 L10 25 Z" fill="currentColor"/>
          <path d="M6 23 L10 25 L10 29 L6 27 Z" fill="currentColor" opacity="0.8"/>
          
          <!-- End Block (Right) -->
          <path d="M26 13 L34 9 L38 11 L30 15 Z" fill="currentColor"/>
          <path d="M30 15 L38 11 L38 15 L30 19 Z" fill="currentColor" opacity="0.8"/>
          
          <!-- Signal Pulse (Animation Path) -->
          <path d="M14 21 L34 11" stroke="white" stroke-width="1" stroke-linecap="round" stroke-dasharray="2 4" opacity="0.5" class="iso-pulse"/>
        </svg>
        <div class="logo-text">{{ .Site.Title }}</div>

      {{ else if eq .Site.Params.logoStyle "bank" }}
        <!-- Option 2: Skewed Memory Bank (Abstract/Stack) -->
        <svg class="site-logo logo-bank" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <g transform="skewX(-15)">
            <!-- Tube 1 -->
            <rect x="10" y="8" width="24" height="4" rx="1" fill="currentColor" opacity="0.9"/>
            <rect x="8" y="7" width="4" height="6" rx="1" fill="currentColor"/> <!-- Cap L -->
            <rect x="32" y="7" width="4" height="6" rx="1" fill="currentColor"/> <!-- Cap R -->
            
            <!-- Tube 2 -->
            <rect x="10" y="18" width="24" height="4" rx="1" fill="currentColor" opacity="0.7"/>
            <rect x="8" y="17" width="4" height="6" rx="1" fill="currentColor"/>
            <rect x="32" y="17" width="4" height="6" rx="1" fill="currentColor"/>
            
            <!-- Tube 3 -->
            <rect x="10" y="28" width="24" height="4" rx="1" fill="currentColor" opacity="0.5"/>
            <rect x="8" y="27" width="4" height="6" rx="1" fill="currentColor"/>
            <rect x="32" y="27" width="4" height="6" rx="1" fill="currentColor"/>
          </g>
        </svg>
        <div class="logo-text">{{ .Site.Title }}</div>

      {{ else if eq .Site.Params.logoStyle "perspective" }}
        <!-- Option 3: Perspective Underline (Cinematic) -->
        <div class="logo-wrapper-perspective">
          <div class="logo-text">{{ .Site.Title }}</div>
          <svg class="site-logo logo-perspective" viewBox="0 0 200 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <!-- Tapered Tube -->
            <path d="M0 5 L200 8 L200 12 L0 15 Z" fill="currentColor" opacity="0.2"/>
            <!-- Solid Edges -->
            <path d="M0 5 L200 8" stroke="currentColor" stroke-width="1"/>
            <path d="M0 15 L200 12" stroke="currentColor" stroke-width="1"/>
            <!-- End Caps -->
            <rect x="0" y="4" width="6" height="12" fill="currentColor"/>
            <rect x="196" y="7" width="4" height="6" fill="currentColor"/>
            <!-- Signal -->
            <line x1="10" y1="10" x2="190" y2="10" stroke="currentColor" stroke-width="2" stroke-dasharray="10 200" class="persp-pulse"/>
          </svg>
        </div>

      {{ else }}
        <!-- Fallback -->
        <div class="logo-text">{{ .Site.Title }}</div>
      {{ end }}
    </a>
  </h1>

  <nav class="site-nav">
    <a href="{{ "about/" | relURL }}">about</a>
    <a href="{{ "projects/" | relURL }}">projects</a>

    <!-- Theme Toggle Button (Lantern) -->
    <button class="theme-toggle" type="button" onclick="toggleTheme()" aria-label="Toggle dark mode" title="Toggle dark mode">
      <!-- Lantern ON (light mode) -->
      <svg class="lamp-on" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <!-- Roof -->
        <path d="M12 3l-7 4h14l-7-4z" />
        <!-- Finial -->
        <path d="M12 2v1" />
        <!-- Cage/Glass -->
        <path d="M5 7l2 11h10l2-11" />
        <!-- Base -->
        <path d="M12 18v4" />
        <path d="M9 22h6" />
        <!-- Light Source (Glow) -->
        <circle cx="12" cy="13" r="3" fill="currentColor" stroke="none" opacity="0.8" />
        <!-- Rays (Shining) -->
        <path d="M12 10v-1" />
        <path d="M12 16v1" />
        <path d="M9 13h-1" />
        <path d="M15 13h1" />
        <path d="M10 11l-1-1" />
        <path d="M14 11l1-1" />
        <path d="M10 15l-1 1" />
        <path d="M14 15l1 1" />
      </svg>
      <!-- Lantern OFF (dark mode) -->
      <svg class="lamp-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <!-- Roof -->
        <path d="M12 3l-7 4h14l-7-4z" />
        <!-- Finial -->
        <path d="M12 2v1" />
        <!-- Cage/Glass -->
        <path d="M5 7l2 11h10l2-11" />
        <!-- Base -->
        <path d="M12 18v4" />
        <path d="M9 22h6" />
        <!-- Light Source (Off) -->
        <circle cx="12" cy="13" r="2" />
      </svg>
    </button>
  </nav>
</header>

<script>
  function toggleTheme() {
    var html = document.documentElement;
    var currentTheme = html.getAttribute('data-theme');
    var newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    html.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
  }

  // Random computer-themed title symbol (only when mode is "random")
  // Symbols inspired by computing history:
  //   λ  - Lambda calculus (Church, Turing)
  //   ⊕  - XOR gate (logic circuits)
  //   ¬  - NOT gate (boolean logic)
  //   ▮  - Block cursor (terminals)
  //   Δ  - Delta/change (state machines)
  //   ⬚  - Empty register (memory)
  //   ◊  - Decision (flowcharts)
  //   »  - Bit shift (assembly)
  (function() {
    var symbol = document.querySelector('.title-symbol');
    if (symbol && symbol.getAttribute('data-mode') === 'random') {
      var symbols = ['λ', '⊕', '¬', '▮', 'Δ', '⬚', '◊', '»'];
      symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
    }
  })();
</script>
